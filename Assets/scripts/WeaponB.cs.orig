using UnityEngine;
using System.Collections;

public class WeaponB : MonoBehaviour {
	public BulletB bulletPrefab;
	public Transform barrelEndTransform;
	public SteamVR_TrackedController trackerController;

	// Use this for initialization
<<<<<<< HEAD
	void Start () 
	{
		trackerController.TriggerClicked += new ClickedEventHandler(RangeHit);
=======
	void Start () {
	//	GetComponent<SteamVR_TrackedController>().TriggerClicked += new ClickedEventHandler(RangeHit);
>>>>>>> a9bcbacfb275174fbdeeda76f85bd5f9f00021b8
	}
	
	// Update is called once per frame
	void Update () {
	}

	void OnTriggerEnter(Collider collider) {
		print ("Attack Triggered");
		if (collider.gameObject.GetComponent<AbstractMonster> () != null) {
			collider.gameObject.GetComponent<AbstractMonster> ().Die ();

		}

	}

	void RangeHit(object sender, ClickedEventArgs e) 
	{
		Debug.Log("Fire");
		BulletB bullet = Instantiate (bulletPrefab) as BulletB;
		bullet.transform.rotation = barrelEndTransform.rotation;
		bullet.transform.position = barrelEndTransform.position;
		bullet.transform.Rotate(-90, 0, 0);
	}
}
